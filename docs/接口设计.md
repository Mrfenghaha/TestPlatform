# Gadget
## MockServers
### mock_servers
1.查询mock列表(包含分页)

url：http://mock_server/mock/show_lists

请求类型:post

请求参数示例:
```
{
    "page_num": 1,  分页的第几页
    "num": 10  每页数量
}
```

返回参数示例:
```
{"success": True,
"data":
[
    {"id":1, "url": "login", "is_available": "yes", "delay": 0, "resp_code": 0, "remark": "正常处理返回"},
    {"id":2, "url": "register", "is_available": "no", "delay": 1000, "resp_code": 1, "remark": "异常处理返回"}
]}
```

2.添加mock数据

url：http://mock_server/mock/add

请求类型:post

请求参数示例:
```
{
    "url": "login",
    "method": "POST",
    "is_available": "yes",
    "delay": 100,
    "resp_code": 0,
    "remark": "模拟登录接口"
}
```

返回参数示例:
```
{"success": True,
"data":
    {"id":1, "url": "login", "is_available": "yes", "delay": 0, "resp_code": 0, "remark": "正常处理返回"}
}
```

3.删除mock数据

url：http://mock_server/mock/delete

请求类型:post

请求参数示例:
```
{
    "id": 1
}
```

返回参数示例:
```
{"success": True}
```

4.编辑mock数据

url：http://mock_server/mock/update

请求类型:post

请求参数示例:
```
{
    "id": 1,
    "url": "login",
    "method": "POST",
    "is_available": "yes",
    "delay": 100,
    "resp_code": 0,
    "remark": "模拟登录接口"
}
```

返回参数示例:
```
{"success": True,
"data":
    {"id":1, "url": "login", "is_available": "yes", "delay": 0, "resp_code": 0, "remark": "正常处理返回"}
}
```

### mock_response
1.查询mock下所有response信息

url：http://mock_server/response/show_lists

请求类型:post

请求参数示例:
```
{
    "mock_id": 1
}
```

返回参数示例:
```
{"success": True,
"data":
[
    {"id":1, "mock_id": 1, "resp_code": 0, "resp_status": "200 OK", "resp_headers": null, "resp_body": {"success": True}, "remark": "响应测试"}
    {"id":1, "mock_id": 1, "resp_code": 0, "resp_status": "200 OK", "resp_headers": {"product": "Peso2Go"}, "resp_body": {"success": True},"remark": "响应测试"}
]}
```

2.添加response数据

url：http://mock_server/response/add

请求类型:post

请求参数示例:
```
{
    "mock_id": 2,
    "resp_code": 1,
    "resp_status": "200 OK",
    "resp_headers": "{"id": 1}",
    "resp_body": "{"success": true}",
    "remark": "响应测试"
}
```

返回参数示例:
```
{"success": True,
"data":
    {"id":1, "mock_id": 2, "resp_code": 1, "resp_status": "200 OK", "resp_headers": {"id": 1}, "resp_body": {"success": true}, "remark": "响应测试"}
}
```

3.删除response数据

url：http://mock_server/response/delete

请求类型:post

请求参数示例:
```
{
    "id": 1
}
```

返回参数示例:
```
{"success": True}
```

4.编辑response数据

url：http://mock_server/response/update

请求类型:post

请求参数示例:
```
{
    "id": 1,
    "mock_id": 2,
    "resp_code": 1,
    "resp_status": "200 OK",
    "resp_headers": {"id": 1},
    "resp_body": {"success": true},
    "remark": "响应测试"
}
```

返回参数示例:
```
{"success": True,
"data":
    {"id":1, "mock_id": 2, "resp_code": 1, "resp_status": "200 OK", "resp_headers": {"id": 1}, "resp_body": {"success": true}, "remark": "响应测试"}
}
```


### mock_configs
1.获取参数配置

url：http://mock_server/configs/info

请求类型:get

返回参数示例:
```
{"success": True,
"data": {
"method": ["GET", "POST", "HEAD", "PUT", "PATCH", "DELETE"],
"resp_status": ["100 Continue", "101 Switching Protocols", 102 Processing", "200 OK",...],
"replace_param": [{"param": "$Time_Ymd", "remark": ""}, {"param": "$Time_HMS", "remark": ""}, {"param": "$Time_YmdHMS", "remark": ""}]
}
}
```

## db_operation
### database_configs

1.查询db_configs列表

url：http://db_operation/configs/show_lists

请求类型:post

请求参数示例:
```
{
    "page_num": 1,  分页的第几页
    "num": 10  每页数量
}
```

返回参数示例:
```
{"success": True,
"data":
[
    {"id":1, "name": "开发环境数据库", "ip": "172.16.0.30", "port": 3000, remark": ""},
    {"id":2, "name": "测试环境数据库", "ip": "172.16.0.40", "port": 3000, "remark": ""}
]}
```

2.添加db_configs数据

url：http://db_operation/configs/add

请求类型:post

请求参数示例:
```
{
    "name": "印度-开发-数据库",
    "ip": "172.16.0.30",
    "port": 3306,
    "username": "qy",
    "password": "mima",
    "remark": "印度产品,开发环境,数据库"
}
```

返回参数示例:
```
{"success": True,
"data":
    {"id":1, "name": "印度-开发-数据库", "ip": "172.16.0.30", "port": 3306, "remark": "印度产品,开发环境,数据库"}
}
```

3.删除db_configs数据

url：http://db_operation/configs/delete

请求类型:post

请求参数示例:
```
{
    "id": 1
}
```

返回参数示例:
```
{"success": True}
```

4.编辑db_configs数据

url：http://db_operation/configs/update

请求类型:post

请求参数示例:
```
{
    "id": 1,
    "name": "印度-开发-数据库",
    "ip": "172.16.0.30",
    "port": 3306,
    "username": "qy",
    "password": "mima",
    "remark": "印度产品,开发环境,数据库"
}
```

返回参数示例:
```
{"success": True,
"data":
    {"id":1, "name": "印度-开发-数据库", "ip": "172.16.0.30", "port": "3306", "remark": "印度产品,开发环境,数据库"}
}
```

### database_operations

1.查询db_operations列表

url：http://db_operation/operations/show_lists

请求类型:post

请求参数示例:
```
{
    "page_num": 1,  分页的第几页
    "num": 10  每页数量
}
```

返回参数示例:
```
{"success": True,
"data":
[
    {"id":1, "name": "开发-查询短验", "db_id": 1, "sql": "select * from test_platform where id = %s", remark": "开发环境,查询短信验证码"},
    {"id":2, "name": "开发-查询短验", "db_id": 2, "sql": "select * from test_platform where id = %s", remark": "开发环境,查询短信验证码"}
]}
```

2.添加db_operations数据

url：http://db_operation/operations/add

请求类型:post

请求参数示例:
```
{
    "name": "开发-查询短验",
    "db_id": 2,
    "sql": "select * from test_platform where id = %s",
    "remark": "开发环境,查询短信验证码"
}
```

返回参数示例:
```
{"success": True,
"data":
    {"id":1, "name": "dev_db", "db_id": "172.16.0.30", "sql": "3306", "remark": "开发环境,查询短信验证码"}
}
```

3.删除db_operations数据

url：http://db_operation/operations/delete

请求类型:post

请求参数示例:
```
{
    "id": 1
}
```

返回参数示例:
```
{"success": True}
```

4.编辑db_operations数据

url：http://db_operation/operations/update

请求类型:post

请求参数示例:
```
{
    "id": 1,
    "name": "开发-查询短验",
    "db_id": 2,
    "sql": "select * from test_platform where id = %s",
    "remark": "开发环境,查询短信验证码"
}
```

返回参数示例:
```
{"success": True,
"data":
    {"id":1, "name": "dev_db", "db_id": "172.16.0.30", "sql": "3306", "remark": "开发环境,查询短信验证码"}
}
```

5.执行db_operations

url：http://db_operation/operations/execute

请求类型:post

请求参数示例:
```
{
    "id": 1,
    "param": ["aaa","123"]
}
```

返回参数示例:
```
{"success": True,
"data":
    {"result_explain": "无需执行或未查到任何结果", "result": {"id": 1}}
}
```